apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
    name: test
    title: test
    description: Test template demonstrates how to reach out to an endpoint external
spec:
    owner: rprakashg-redhat
    type: service

    parameters:
    - title: Provider information about search users in OKTA
    required:
    - query
    - token
    - url
    properties:
        query:
            title: Query
            type: string
            description: Search query
        apiToken:
            title: API token
            type: string
            description: api token
        url:
            title: url
            type: string
            description: api endpoint
    steps:
    - id: search_users
      name: search users 
      action: http:backstage:request
      input:
        method: "GET"
        path: ${{ parameters.url }}
        headers:
            Accept: "application/json"
            Content-Type: "application/json"
            Authorization: ${{ parameters.apiToken }}
        params:
            q: ${{ parameters.query }}
            limit: 25
    output:
        results: '{{ steps["search_users"].output.body }}'